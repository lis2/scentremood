<style>
  #mood svg {
    width: 38px;
      margin-right: 7px;
  }
  #mood a {
    cursor: hand;
  }
  #mood svg:hover path {
    fill: #c82127;
  }
  #mood a.active svg path {
    fill: #008080;
  }
  #mood a.passive svg path {
    fill: #d6d6d6;
  }
  #mood h1 {
    background-color: #ebeef0;
    font-size: 20px;
    color: #000;
    font-family: Georgia;
  }
  #mood {
    padding: 10px 15px 30px 15px;
    background-color: #ebeef0;
    width: 251px;
  }
  #mood a.history {
    font-family: Arial;
    float: right;
    color: #5b5b5b;
    font-size: 14px;
    text-decoration: none;
    margin-top: 8px;
    margin-right: 13px;
  }
  #mood a.history:hover {
    color: #53A39A;
  }
</style>
<div id="mood">
  <h1>How do you feel today?</h1>
  <a onclick="markMood(1)" id="mood1">
    <svg aria-hidden="true" data-prefix="far" data-icon="frown" class="svg-inline--fa fa-frown fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path fill="currentColor" d="M248 8C111 8 0 119 0 256s111 248 248 248 248-111 248-248S385 8 248 8zm0 448c-110.3 0-200-89.7-200-200S137.7 56 248 56s200 89.7 200 200-89.7 200-200 200zm-80-216c17.7 0 32-14.3 32-32s-14.3-32-32-32-32 14.3-32 32 14.3 32 32 32zm160-64c-17.7 0-32 14.3-32 32s14.3 32 32 32 32-14.3 32-32-14.3-32-32-32zm-80 128c-40.2 0-78 17.7-103.8 48.6-8.5 10.2-7.1 25.3 3.1 33.8 10.2 8.4 25.3 7.1 33.8-3.1 16.6-19.9 41-31.4 66.9-31.4s50.3 11.4 66.9 31.4c8.1 9.7 23.1 11.9 33.8 3.1 10.2-8.5 11.5-23.6 3.1-33.8C326 321.7 288.2 304 248 304z"></path></svg>

  </a>
  <a onclick="markMood(2)" id="mood2">
<svg aria-hidden="true" data-prefix="far" data-icon="flushed" class="svg-inline--fa fa-flushed fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path fill="currentColor" d="M248 8C111 8 0 119 0 256s111 248 248 248 248-111 248-248S385 8 248 8zm0 448c-110.3 0-200-89.7-200-200S137.7 56 248 56s200 89.7 200 200-89.7 200-200 200zm96-312c-44.2 0-80 35.8-80 80s35.8 80 80 80 80-35.8 80-80-35.8-80-80-80zm0 128c-26.5 0-48-21.5-48-48s21.5-48 48-48 48 21.5 48 48-21.5 48-48 48zm0-72c-13.3 0-24 10.7-24 24s10.7 24 24 24 24-10.7 24-24-10.7-24-24-24zm-112 24c0-44.2-35.8-80-80-80s-80 35.8-80 80 35.8 80 80 80 80-35.8 80-80zm-80 48c-26.5 0-48-21.5-48-48s21.5-48 48-48 48 21.5 48 48-21.5 48-48 48zm0-72c-13.3 0-24 10.7-24 24s10.7 24 24 24 24-10.7 24-24-10.7-24-24-24zm160 144H184c-13.2 0-24 10.8-24 24s10.8 24 24 24h128c13.2 0 24-10.8 24-24s-10.8-24-24-24z"></path></svg>
  </a>
  <a onclick="markMood(3)" id="mood3">
<svg aria-hidden="true" data-prefix="far" data-icon="meh" class="svg-inline--fa fa-meh fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path fill="currentColor" d="M248 8C111 8 0 119 0 256s111 248 248 248 248-111 248-248S385 8 248 8zm0 448c-110.3 0-200-89.7-200-200S137.7 56 248 56s200 89.7 200 200-89.7 200-200 200zm-80-216c17.7 0 32-14.3 32-32s-14.3-32-32-32-32 14.3-32 32 14.3 32 32 32zm160-64c-17.7 0-32 14.3-32 32s14.3 32 32 32 32-14.3 32-32-14.3-32-32-32zm8 144H160c-13.2 0-24 10.8-24 24s10.8 24 24 24h176c13.2 0 24-10.8 24-24s-10.8-24-24-24z"></path></svg>
  </a>
  <a onclick="markMood(4)" id="mood4">
<svg aria-hidden="true" data-prefix="far" data-icon="smile" class="svg-inline--fa fa-smile fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path fill="currentColor" d="M248 8C111 8 0 119 0 256s111 248 248 248 248-111 248-248S385 8 248 8zm0 448c-110.3 0-200-89.7-200-200S137.7 56 248 56s200 89.7 200 200-89.7 200-200 200zm-80-216c17.7 0 32-14.3 32-32s-14.3-32-32-32-32 14.3-32 32 14.3 32 32 32zm160 0c17.7 0 32-14.3 32-32s-14.3-32-32-32-32 14.3-32 32 14.3 32 32 32zm4 72.6c-20.8 25-51.5 39.4-84 39.4s-63.2-14.3-84-39.4c-8.5-10.2-23.7-11.5-33.8-3.1-10.2 8.5-11.5 23.6-3.1 33.8 30 36 74.1 56.6 120.9 56.6s90.9-20.6 120.9-56.6c8.5-10.2 7.1-25.3-3.1-33.8-10.1-8.4-25.3-7.1-33.8 3.1z"></path></svg>
  </a>
  <a onclick="markMood(5)" id="mood5">
<svg aria-hidden="true" data-prefix="far" data-icon="grin-stars" class="svg-inline--fa fa-grin-stars fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path fill="currentColor" d="M248 8C111 8 0 119 0 256s111 248 248 248 248-111 248-248S385 8 248 8zm0 448c-110.3 0-200-89.7-200-200S137.7 56 248 56s200 89.7 200 200-89.7 200-200 200zm105.6-151.4c-25.9 8.3-64.4 13.1-105.6 13.1s-79.6-4.8-105.6-13.1c-9.8-3.1-19.4 5.3-17.7 15.3 7.9 47.2 71.3 80 123.3 80s115.3-32.9 123.3-80c1.6-9.8-7.7-18.4-17.7-15.3zm-227.9-57.5c-1 6.2 5.4 11 11 7.9l31.3-16.3 31.3 16.3c5.6 3.1 12-1.7 11-7.9l-6-34.9 25.4-24.6c4.5-4.5 1.9-12.2-4.3-13.2l-34.9-5-15.5-31.6c-2.9-5.8-11-5.8-13.9 0l-15.5 31.6-34.9 5c-6.2.9-8.9 8.6-4.3 13.2l25.4 24.6-6.1 34.9zm259.7-72.7l-34.9-5-15.5-31.6c-2.9-5.8-11-5.8-13.9 0l-15.5 31.6-34.9 5c-6.2.9-8.9 8.6-4.3 13.2l25.4 24.6-6 34.9c-1 6.2 5.4 11 11 7.9l31.3-16.3 31.3 16.3c5.6 3.1 12-1.7 11-7.9l-6-34.9 25.4-24.6c4.5-4.6 1.8-12.2-4.4-13.2z"></path></svg>
  </a>
  <a id="history" class="history">How have I been feeling?</a>
</div>

 <script>
   var uid = "testsecretuid"; // this will be taken from sharepoint
   var appUrl = "http://localhost:3000/"

   document.getElementById("history").href = appUrl + 'history/' + uid;

   var markMood = function (mood) {
     var http = new XMLHttpRequest();
     http.open('POST', 'http://localhost:3000/api/moods');
     http.setRequestHeader('Content-type', 'application/x-www-form-urlencoded');
     http.send("uid=" + uid + "&mood=" + mood + "&date=" + today());
     http.onreadystatechange = function() {
            if (this.readyState == 4 && this.status == 200) {
              currentMood()
              }
        }
   }

   var currentMood = function() {
     var http = new XMLHttpRequest();
     http.open('GET', 'http://localhost:3000/api/moods/' + uid, true);
     http.onreadystatechange = function() {
            if (this.readyState == 4 && this.status == 200) {
              var response = JSON.parse(this.responseText)
              if(response.mood && response.mood.mood) {
                var all = ['mood1', 'mood2', 'mood3', 'mood4', 'mood5']
                for (i = 0; i < all.length; i++) { 
                  document.getElementById(all[i]).classList.add("passive")
                  document.getElementById(all[i]).classList.remove("active")
                }
                var active = document.getElementById("mood" + response.mood.mood)
                active.classList.add("active");
                active.classList.remove("passive");
              }
        }
     }
     http.send()
   }

   var today = function() {
     var today = new Date();
     return today.getFullYear() + '-' +
       ('0' + (today.getMonth()+1)).slice(-2) + '-' +
       ('0' + today.getDate()).slice(-2)
   }
   currentMood()
 </script>

